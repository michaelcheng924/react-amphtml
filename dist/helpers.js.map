{"version":3,"file":"helpers.js","sources":["../src/helpers/Action.js","../src/helpers/Bind.js"],"sourcesContent":["// TODO: Remove `{ Component }` when Rollup fixes its code splitting.\n// Currently, this fixes an `React__default is undefined` error.\nimport React, { Component } from 'react'; // eslint-disable-line no-unused-vars\nimport PropTypes from 'prop-types';\n\nexport const ON_ATTRIBUTE = 'on';\n\nconst Action = ({ children: RenderProp, events, ...props }) => {\n  const eventString = Object.entries(events).reduce(\n    (entireEventString, [eventName, eventActions], eventIndex) => {\n      const actionString = eventActions.reduce(\n        (entireActionString, nextAction, actionIndex) => (\n          `${entireActionString}${actionIndex > 0 ? ',' : ''}${nextAction}`\n        ),\n        '',\n      );\n\n      return `${entireEventString}${eventIndex > 0 ? ';' : ''}${eventName}:${actionString}`;\n    },\n    '',\n  );\n\n  return (\n    <RenderProp\n      {...{\n        ...props,\n        // `' on'` is used here as a hack to get React to render the `on`\n        // attribute on the element\n        [ON_ATTRIBUTE]: eventString,\n      }}\n    />\n  );\n};\n\nAction.propTypes = {\n  children: PropTypes.func.isRequired,\n  events: PropTypes.objectOf((\n    PropTypes.arrayOf(PropTypes.string)\n  )).isRequired,\n};\n\nexport default Action;\n","// TODO: Remove `{ Component }` when Rollup fixes its code splitting.\n// Currently, this fixes an `React__default is undefined` error.\nimport React, { Component } from 'react'; // eslint-disable-line no-unused-vars\nimport PropTypes from 'prop-types';\nimport contextHelper from '../lib/contextHelper';\nimport { CONTEXT_KEY } from '../constants';\nimport { ON_ATTRIBUTE } from './Action';\n\nexport const BLACKLIST = [\n  ON_ATTRIBUTE,\n];\n\nconst boundAttributeRegExp = /^\\[.*?\\]$/;\n\nconst Bind = ({ children: RenderProp, ...props }, context) => {\n  contextHelper({ context, extension: 'amp-bind' });\n\n  const boundAttributeProps = Object.entries(props).reduce(\n    (allProps, [propsName, propValue]) => ({\n      ...allProps,\n      [(\n        BLACKLIST.includes(propsName) || boundAttributeRegExp.test(propsName) ? (\n          propsName\n        ) : (\n          `[${propsName}]`\n        )\n      )]: (\n        propValue\n      ),\n    }),\n    {},\n  );\n\n  return <RenderProp {...boundAttributeProps} />;\n};\n\nBind.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nBind.contextTypes = {\n  [CONTEXT_KEY]: PropTypes.shape({\n    addExtension: PropTypes.func.isRequired,\n  }),\n};\n\nexport default Bind;\n"],"names":["ON_ATTRIBUTE","Action","RenderProp","children","events","props","eventString","Object","entries","reduce","entireEventString","eventIndex","eventName","eventActions","actionString","entireActionString","nextAction","actionIndex","React","propTypes","PropTypes","func","isRequired","objectOf","arrayOf","string","BLACKLIST","boundAttributeRegExp","Bind","context","extension","boundAttributeProps","allProps","propsName","propValue","includes","test","contextTypes","CONTEXT_KEY","shape"],"mappings":";;;;;;;;;;;;AAAA;AACA;AAIA,AAAO,IAAMA,eAAe,IAArB;;AAEP,IAAMC,SAAS,SAATA,MAAS,OAAgD;MAAnCC,UAAmC,QAA7CC,QAA6C;MAAvBC,MAAuB,QAAvBA,MAAuB;MAAZC,KAAY;;MACvDC,cAAcC,OAAOC,OAAP,CAAeJ,MAAf,EAAuBK,MAAvB,CAClB,UAACC,iBAAD,SAA+CC,UAA/C,EAA8D;;QAAzCC,SAAyC;QAA9BC,YAA8B;;QACtDC,eAAeD,aAAaJ,MAAb,CACnB,UAACM,kBAAD,EAAqBC,UAArB,EAAiCC,WAAjC;kBACKF,kBADL,IAC0BE,cAAc,CAAd,GAAkB,GAAlB,GAAwB,EADlD,IACuDD,UADvD;KADmB,EAInB,EAJmB,CAArB;;gBAOUN,iBAAV,IAA8BC,aAAa,CAAb,GAAiB,GAAjB,GAAuB,EAArD,IAA0DC,SAA1D,SAAuEE,YAAvE;GATgB,EAWlB,EAXkB,CAApB;;SAeEI,6BAAC,UAAD,yBAEOb,KAFP,+BAKKL,YALL,EAKoBM,WALpB,GADF;CAfF;;AA2BAL,OAAOkB,SAAP,GAAmB;YACPC,UAAUC,IAAV,CAAeC,UADR;UAETF,UAAUG,QAAV,CACNH,UAAUI,OAAV,CAAkBJ,UAAUK,MAA5B,CADM,EAELH;CAJL;;AClCA;AACA;AAOA,AAAO,IAAMI,YAAY,CACvB1B,YADuB,CAAlB;;AAIP,IAAM2B,uBAAuB,WAA7B;;AAEA,IAAMC,OAAO,SAAPA,IAAO,OAAqCC,OAArC,EAAiD;MAApC3B,UAAoC,QAA9CC,QAA8C;MAArBE,KAAqB;;0BAC9C,EAAEwB,gBAAF,EAAWC,WAAW,UAAtB,EAAd;;MAEMC,sBAAsBxB,OAAOC,OAAP,CAAeH,KAAf,EAAsBI,MAAtB,CAC1B,UAACuB,QAAD;;QAAYC,SAAZ;QAAuBC,SAAvB;;kCACKF,QADL,+BAGIN,UAAUS,QAAV,CAAmBF,SAAnB,KAAiCN,qBAAqBS,IAArB,CAA0BH,SAA1B,CAAjC,GACEA,SADF,SAGMA,SAHN,MAHJ,EASIC,SATJ;GAD0B,EAa1B,EAb0B,CAA5B;;SAgBOhB,6BAAC,UAAD,EAAgBa,mBAAhB,CAAP;CAnBF;;AAsBAH,KAAKT,SAAL,GAAiB;YACLC,UAAUC,IAAV,CAAeC;CAD3B;;AAIAM,KAAKS,YAAL,gCACGC,qBADH,EACiBlB,UAAUmB,KAAV,CAAgB;gBACfnB,UAAUC,IAAV,CAAeC;CADhB,CADjB;;;;;"}