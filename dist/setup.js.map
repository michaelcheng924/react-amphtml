{"version":3,"file":"setup.js","sources":["../src/setup/AmpScripts.js","../src/setup/AmpScriptsManager.js","../src/setup/headerBoilerplate.js"],"sourcesContent":["import React from 'react';\nimport { Script } from '../amphtml/amphtml';\nimport { AMP } from '../constants';\n\nconst AmpScripts = class {\n  constructor(htmlFormat = AMP) {\n    this.scripts = new Map([\n      [\n        htmlFormat,\n        <Script key={htmlFormat} specName={htmlFormat} />,\n      ],\n    ]);\n  }\n\n  addExtension(extension) {\n    this.scripts.set(\n      extension,\n      <Script key={extension} specName={extension} />,\n    );\n  }\n\n  getScriptElements() {\n    return [...this.scripts.values()];\n  }\n};\n\nexport default AmpScripts;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AmpScripts from './AmpScripts';\nimport { CONTEXT_KEY } from '../constants';\n\nconst AmpScriptsManager = class extends Component {\n  getChildContext() {\n    return { [CONTEXT_KEY]: this.props.ampScripts };\n  }\n\n  render() {\n    return React.Children.only(this.props.children);\n  }\n};\n\nAmpScriptsManager.childContextTypes = {\n  [CONTEXT_KEY]: PropTypes.instanceOf(AmpScripts).isRequired,\n};\n\nAmpScriptsManager.propTypes = {\n  children: PropTypes.node.isRequired,\n  ampScripts: PropTypes.instanceOf(AmpScripts).isRequired,\n};\n\nexport default AmpScriptsManager;\n","/* eslint-disable react/no-danger */\nimport React from 'react';\n\nconst key = suffix => `react-amphtml-header-boilerplate-${suffix}`;\n\nexport default href => [\n  (\n    <meta key={key('meta-charset')} charSet=\"utf-8\" />\n  ),\n  (\n    <meta key={key('meta-viewport')} name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\" />\n  ),\n  (\n    <link key={key('canonical-link')} rel=\"canonical\" href={href} />\n  ),\n  (\n    <style\n      key={key('style')}\n      amp-boilerplate=\"\"\n      dangerouslySetInnerHTML={{\n        __html: `\n          body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}\n        `,\n      }}\n    />\n  ),\n  (\n    <noscript key={key('noscript')}>\n      <style\n        amp-boilerplate=\"\"\n        dangerouslySetInnerHTML={{\n          __html: `\n            body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}\n          `,\n        }}\n      />\n    </noscript>\n  ),\n];\n"],"names":["AmpScripts","htmlFormat","AMP","scripts","Map","React","Script","extension","set","values","AmpScriptsManager","CONTEXT_KEY","props","ampScripts","Children","only","children","Component","childContextTypes","PropTypes","instanceOf","isRequired","propTypes","node","key","suffix","href"],"mappings":";;;;;;;;;;;;;AAIA,IAAMA;wBAC0B;QAAlBC,UAAkB,uEAALC,aAAK;;;SACvBC,OAAL,GAAe,IAAIC,GAAJ,CAAQ,CACrB,CACEH,UADF,EAEEI,6BAACC,cAAD,IAAQ,KAAKL,UAAb,EAAyB,UAAUA,UAAnC,GAFF,CADqB,CAAR,CAAf;;;;;iCAQWM,SAVT,EAUoB;WACjBJ,OAAL,CAAaK,GAAb,CACED,SADF,EAEEF,6BAACC,cAAD,IAAQ,KAAKC,SAAb,EAAwB,UAAUA,SAAlC,GAFF;;;;wCAMkB;mDACP,KAAKJ,OAAL,CAAaM,MAAb,EAAX;;;;GAlBJ;;ACCA,IAAMC;;;;;;;;;;sCACc;0CACNC,qBAAV,EAAwB,KAAKC,KAAL,CAAWC,UAAnC;;;;6BAGO;aACAR,eAAMS,QAAN,CAAeC,IAAf,CAAoB,KAAKH,KAAL,CAAWI,QAA/B,CAAP;;;;EANoCC,eAAlC,CAAN;;AAUAP,kBAAkBQ,iBAAlB,gCACGP,qBADH,EACiBQ,UAAUC,UAAV,CAAqBpB,UAArB,EAAiCqB,UADlD;;AAIAX,kBAAkBY,SAAlB,GAA8B;YAClBH,UAAUI,IAAV,CAAeF,UADG;cAEhBF,UAAUC,UAAV,CAAqBpB,UAArB,EAAiCqB;CAF/C;;ACnBA;AACA;AAEA,IAAMG,MAAM,SAANA,GAAM;+CAA8CC,MAA9C;CAAZ;;AAEA,yBAAe;SAAQ,CAEnBpB,uCAAM,KAAKmB,IAAI,cAAJ,CAAX,EAAgC,SAAQ,OAAxC,GAFmB,EAKnBnB,uCAAM,KAAKmB,IAAI,eAAJ,CAAX,EAAiC,MAAK,UAAtC,EAAiD,SAAQ,oDAAzD,GALmB,EAQnBnB,uCAAM,KAAKmB,IAAI,gBAAJ,CAAX,EAAkC,KAAI,WAAtC,EAAkD,MAAME,IAAxD,GARmB,EAWnBrB;SACOmB,IAAI,OAAJ,CADP;uBAEkB,EAFlB;6BAG2B;;;IAdR,EAsBnBnB;;MAAU,KAAKmB,IAAI,UAAJ,CAAf;;yBAEoB,EADlB;+BAE2B;;;;GAzBV,CAAR;CAAf;;;;;;"}